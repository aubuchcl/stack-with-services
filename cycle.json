{
  "version": "1.0",
  "services": {
    "vpn": {
      "auth": {
        "cycle_accounts": true,
        "vpn_accounts": true
      },
      "allow_internet": true
    },
    "loadbalancer": {
      "type": "haproxy",
      "ipv4": true,
      "ipv6": true,
      "details": {
        "default": {
          "frontend": {
            "mode": "tcp",
            "max_connections": 750,
            "timeouts": {
              "client_secs": 8,
              "client_fin_ms": null,
              "http_keep_alive_ms": null,
              "http_request_ms": null
            }
          },
          "backend": {
            "balance": "roundrobin",
            "timeouts": {
              "server_secs": 8,
              "server_fin_ms": null,
              "connect_ms": 500,
              "queue_ms": 500,
              "tunnel_secs": null
            }
          }
        },
        "ports": {
          "1194": {
            "frontend": {
              "mode": "tcp",
              "max_connections": 50,
              "timeouts": {
                "client_secs": 8,
                "client_fin_ms": null,
                "http_keep_alive_ms": null,
                "http_request_ms": null
              }
            },
            "backend": {
              "balance": "source",
              "timeouts": {
                "server_secs": 8,
                "server_fin_ms": null,
                "connect_ms": 500,
                "queue_ms": 500,
                "tunnel_secs": null
              }
            }
          }
        }
      }
    }
  },
  "containers": {
    "demo": {
      "name": "demo",
      "image": {
        "name": "simplews",
        "origin": {
          "type": "docker-file",
          "details": {
            "context_dir": "/",
            "build_file": "/Dockerfile"
          }
        }
      },
      "config": {
        "network": {
          "public": "enable",
          "hostname": "simplews",
          "ports": ["80:80"]
        },
        "deploy": {
          "instances": 1
        }
      }
    },
    "reach": {
      "name": "reach",
      "image": {
        "name": "simplews-external",
        "origin": {
          "type": "docker-file",
          "details": {
            "repo": {
              "url": "https://github.com/aubuchcl/build-dir-two.git"
            },
            "context_dir": "/",
            "build_file": "/Dockerfile"
          }
        }
      },
      "config": {
        "network": {
          "public": "enable",
          "hostname": "simplews",
          "ports": ["80:80"]
        },
        "deploy": {
          "instances": 1
        }
      }
    }
  }
}
